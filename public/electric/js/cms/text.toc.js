$(function(){$(".widget-text-toc").each(function(){var a=$(this),b=$("<ul></ul>"),c=null;$(".widget h2.toc:not(.toc-ignore), .widget h3.toc:not(.toc-ignore)",a.parents(".region")).each(function(){var a=$(this),d=a.data("label-menu");void 0===d&&(d=a.text().trim());var e=d.toLowerCase().replace(/ /g,"-");a.prepend($('<a name="'+e+'"></a>')),"h3"==a.context.localName?(null===c&&(c=$("<ul></ul>")),c.append($('<li><a href="#'+e+'">'+d+"</a></li>"))):(c&&($("li",b).last().append(c),c=null),b.append($('<li><a href="#'+e+'">'+d+"</a></li>")))}),c&&$("li",b).last().append(c),a.append(b)})});