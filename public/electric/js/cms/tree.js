function joppaInitializeNodeTree(a,b,c,d,e){window.overlaySelector=".site-tree .spinner",$(".site-tree").load(a,function(){var a=$("#node-tree");e&&($(".node").removeClass("selected"),$("#node-"+e).addClass("selected"));for(var f in d){$("#node-"+f).addClass("closed").find(".toggle .icon").toggleClass("icon--plus-square-o").toggleClass("icon--minus-square-o")}a.find(".node a.toggle").each(function(a){$(this).click(function(){var a=$(this),c=a.parent(),d=a.find(".icon"),e=c.attr("id").replace("node-","");return c.toggleClass("closed"),d.toggleClass("icon--plus-square-o").toggleClass("icon--minus-square-o"),$.post(b.replace("%25node%25",e)),!1})});var g={listType:"ul",items:"li",handle:".handle",helper:"clone",opacity:.6,placeholder:"placeholder",protectRoot:!0,isTree:!0,update:function(){var b=a.nestedSortable("serialize");a.nestedSortable("destroy").addClass("disabled");var d=$.post(c,{data:b},function(b){a.nestedSortable(g).removeClass("disabled")});rideApp.common.handleXHRCallback(d,"Tree updated","Could not update tree")}};a.nestedSortable(g)})}